<project name="lightdark_boot" app="Snap! 4.0, http://snap.berkeley.edu" version="1"><notes></notes><thumbnail>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAB4CAYAAAB1ovlvAAADi0lEQVR4nO3Yv0sbYRzH8Tjp3kK7ZHDyL7B0UrIInSIGQQVb+j9IESludnCxi4iuHYLFTRwq4pBSDEpRCIo/giI6xFHSEgjRb/tcuaNnjmLJj4/Xvl/wheS4Jzw8vAmXJAwQSqg3gP8bAUIqMsDT01NbXV19UHN0dNTus0Eb1AW4vLxsJycnLZ9PM6/sQ/qRfcw8/uN8fZuy8/Nzb83W1pbijNBCoQCPj49tf38/mK6urtB7N4lEwiYmJuqu/+18fvnEym+SwdSKX+zbzLPQNX8uLi6CdWtra6qzQguEAsxms7a7uxtMZ2enHR4e2vT0tPctNDw87AXopru725LJpHef/9pd7+joCL3v7e21sbExm5ubs0wmY4VCwVuTuxPg9/cvzGrVyADPzs6CPa2vr6vOCi0QCtA9a+Xz+WBcgJVKxUZHR61Wq/1a8DOqnp4e6+vrs/n5ee8+/7Uf5+/vFxcXbXx83Pb29mxkZCT47LsBet+A755HBui+mf11KysrkoNCa4QCLJfLlsvl6saJun7fub29tc3NzdDn518/jYwtag4ODoJ17lkQ/466HyELCwu2sbHR8nEx3oe7z18zNTXV9AOAVuTfMKVSyXZ2dh7UXF5etvts0Ab8EQ0pAoQUAUKKACFFgJAiQEgRIKQIEFIECCkChBQBQooAIUWAkCJASBEgpAgQUgQIKQKEFAFCigAhRYCQIkBIESCkCBBSBAgpAoQUAUKKACFFgJAiQEgRIKQIEFIECCkChBQBQooAIUWAkCJASBEgpAgQUgQIKQKEFAFCigAhRYCQIkBIESCkCBBSBAgpAoQUAUKKACFFgJAiQEgRYANubm6sWq2qtxFrBNigdDpt19fX6m3EFgE2qL+/34uwVCqptxJLBNigq6srGxwc9CIsFovq7cQOATbIPQe6AP0pFArqLcUKATbBwMBAKMLt7W31lmKDAJtgaWkpFKCbXC6n3lYsEGATVCoVL7qhoSHvF3E2m7XJyUn1tmKBAJvEBTg7O6veRuwQYJOkUin1FmKJACFFgJAiQEgRIKQIEFIECCkChBQBQooAIUWAkCJASBEgpAgQUgQIKQKEFAFCigAhRYCQIkBIESCkCBBSBAgpAoQUAUKKACFFgJAiQEgRIKQIEFIECCkChBQBQooAIUWAkCJASBEgpAgQUgQIKQKEFAFCigAhRYCQIkBIESCkCBBSPwCp3n1fT2awAgAAAABJRU5ErkJggg==</thumbnail><stage name="Stage" width="480" height="360" costume="0" tempo="60" threadsafe="false" lines="round" codify="false" inheritance="false" sublistIDs="false" scheduled="false" id="1"><pentrails>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAFoCAYAAACPNyggAAACtUlEQVR4nO3BMQEAAADCoPVPbQwfoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+Bo3+AAF/RMkcAAAAAElFTkSuQmCC</pentrails><costumes><list id="2"></list></costumes><sounds><list id="3"></list></sounds><variables></variables><blocks></blocks><scripts></scripts><sprites><sprite name="Sprite" idx="1" x="-0.09397763925448999" y="-16.599138244926365" heading="-30.999999999999773" scale="1" rotation="1" draggable="true" costume="0" color="80,80,80" pen="tip" id="8"><costumes><list id="9"></list></costumes><sounds><list id="10"></list></sounds><variables><variable name="energy"><l>0</l></variable></variables><blocks></blocks><scripts><script x="434" y="97"><block s="receiveOnClone"></block><block s="doForever"><script><block s="doIf"><block s="reportTouchingColor"><color>255,255,255,1</color></block><script><block s="doChangeVar"><l>energy</l><l>1</l></block></script></block><block s="doIf"><block s="reportTouchingColor"><color>0,0,0,1</color></block><script><block s="doChangeVar"><l>energy</l><l>-1</l></block></script></block><block s="doIf"><block s="reportOr"><block s="reportEquals"><block var="energy"/><l>0</l></block><block s="reportEquals"><block var="energy"/><l>100</l></block></block><script><custom-block s="collabsnap-send-myself-to-server"></custom-block><block s="removeClone"></block></script></block><block s="bubble"><block var="energy"/></block><block s="forward"><l>10</l></block><block s="turn"><block s="reportRandom"><l>-10</l><l>10</l></block></block><block s="bounceOffEdge"></block></script></block></script><script x="197" y="92"><block s="receiveGo"></block><custom-block s="collabsnap-send-myself-to-server"></custom-block></script></scripts></sprite><watcher scope="Sprite" var="energy" style="normal" x="10" y="10" color="243,118,29"/></sprites></stage><hidden></hidden><headers></headers><code></code><blocks><block-definition s="collabsnap-ping-server" type="command" category="control"><header></header><code></code><inputs></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l></l></list><l>var xhr = new XMLHttpRequest();&#xD;xhr.open("GET", "/server/ping/" + collabsnap_activity + "/" + collabsnap_group, true);&#xD;xhr.send();</l></block><list></list></block></script></block-definition><block-definition s="collabsnap-poll-server" type="command" category="control"><header></header><code></code><inputs></inputs><script><block s="doForever"><script><block s="doRun"><block s="reportJSFunction"><list><l>newSpriteHandler</l><l>messageHandler</l><l>filter</l></list><l>if((world.collabsnapPolling == undefined || !world.collabsnapPolling)&#xD;   &amp;&amp; world.collabsnapListeners != undefined &amp;&amp; world.collabsnapListeners.length &gt; 0) {&#xD;  world.collabsnapPolling = true;&#xD;  var xhr = new XMLHttpRequest();&#xD;  var queriesDoc = document.implementation.createDocument(null, "queries");&#xD;  for(var idx = 0 ; idx &lt; world.collabsnapListeners.length ; idx++) {&#xD;    var queryDoc = queriesDoc.createElement("query");&#xD;    if(world.collabsnapListeners[idx].filter) {&#xD;      queriesDoc.documentElement.appendChild(queryDoc);&#xD;      queryDoc.appendChild(world.collabsnapListeners[idx].filter(queriesDoc));&#xD;    }&#xD;  }&#xD;&#xD;  var queryStr = new XMLSerializer().serializeToString(queriesDoc);&#xD;  xhr.open("POST", "/server/poll/" + collabsnap_activity + "/" + collabsnap_group, true);&#xD;  xhr.setRequestHeader("Content-length", queryStr.length);&#xD;  xhr.onreadystatechange = function () {&#xD;    world.collabsnapPolling = false;&#xD;    if(xhr.readyState === XMLHttpRequest.DONE &amp;&amp; xhr.status === 200) {&#xD;      if (xhr.responseText == "false") {&#xD;      } else if(xhr.responseText == "ping") {&#xD;        window.alert("Ping sent to server, received here");&#xD;      } else if (xhr.responseXML != null) {&#xD;        for(var idx = 0 ; idx &lt; world.collabsnapListeners.length ; idx++) {&#xD;          var msg;&#xD;          var msgXML = xhr.responseXML.childNodes[0].childNodes[idx];&#xD;          if(msgXML.nodeName == "null") {        &#xD;          } else if(msgXML.nodeName == "message") {&#xD;            msg = msgXML;&#xD;            invoke(world.collabsnapListeners[idx].callback, new List([msg]));&#xD;          } else if (msgXML.nodeName == "sprite") {&#xD;            var ser = new SnapSerializer();&#xD;            var ide_morph = world.children[0];&#xD;            ser.project = ide_morph;&#xD;            var resp = xhr.responseText;&#xD;            msg = ser.loadValue(ser.parse(resp));&#xD;            invoke(world.collabsnapListeners[idx].callback, new List([msg]));&#xD;          }          &#xD;        }&#xD;      }&#xD;    }&#xD;  };&#xD;  xhr.send(queryStr);&#xD;}</l></block><list></list></block><block s="doWait"><l>1</l></block></script></block></script></block-definition><block-definition s="collabsnap-serialize-sprite %&apos;sprite&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%obj"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>thing</l></list><l>return new SnapSerializer().serialize(thing);</l></block><list><block var="sprite"/></list></block></block></script></block-definition><block-definition s="collabsnap-send-to-server %&apos;str&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>str</l></list><l>var xhr = new XMLHttpRequest();&#xD;xhr.open("POST", "/server/postsprite/" + collabsnap_activity + "/" + collabsnap_group, true);&#xD;xhr.setRequestHeader("Content-length", str.length);&#xD;xhr.setRequestHeader("Connection", "close");&#xD;xhr.send(str);</l></block><list><block var="str"/></list></block></script></block-definition><block-definition s="collabsnap-send-myself-to-server" type="command" category="control"><header></header><code></code><inputs></inputs><script><custom-block s="collabsnap-send-to-server %s"><custom-block s="collabsnap-serialize-sprite %obj"><block s="reportGet"><l><option>self</option></l></block></custom-block></custom-block></script></block-definition><block-definition s="collabsnap-new-sprite-as-sprite %&apos;sprite&apos;" type="command" category="operators"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>sprite</l></list><l>var ide_morph = world.children[0];&#xD;ide_morph.sprites.add(sprite);&#xD;ide_morph.corral.addSprite(sprite);&#xD;sprite.allHatBlocksFor(&apos;__shout__go__&apos;).forEach(&#xD;  function(block) {&#xD;    ide_morph.stage.threads.startProcess(block);&#xD;  });</l></block><list><block var="sprite"/></list></block></script></block-definition><block-definition s="collabsnap-new-sprite-as-clone %&apos;sprite&apos;" type="command" category="operators"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>sprite</l></list><l>sprite.isClone = true;&#xD;sprite.name = "";&#xD;var ide_morph = world.children[0];&#xD;&#xD;sprite.allHatBlocksFor(&apos;__clone__init__&apos;).forEach(&#xD;  function (block) {&#xD;    ide_morph.stage.threads.startProcess(block);  &#xD;  });</l></block><list><block var="sprite"/></list></block></script></block-definition><block-definition s="collabsnap-filter-variable-equal %&apos;name&apos; %&apos;value&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%txt"></input><input type="%txt"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>name</l><l>value</l></list><l>return function(xmlDoc) {&#xD;  var ele = xmlDoc.createElement("variable-equal");&#xD;  ele.setAttribute("name", name);&#xD;  ele.setAttribute("value", value);&#xD;  return ele;&#xD;}</l></block><list><block var="name"/><block var="value"/></list></block></block></script></block-definition><block-definition s="collabsnap-id" type="reporter" category="variables"><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l></l></list><l>// We stick this on world because it&apos;s there and this is a prototype.&#xD;// We should change this in the future because world isn&apos;t under out control,&#xD;// and may change out from underneath us&#xD;if(world.collabsnapUniqueId == undefined) {&#xD;  // Ripped from http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript &#xD;  world.collabsnapUniqueId = &apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;.replace(/[xy]/g, function(c) {&#xD;    var r = Math.random()*16|0, v = c == &apos;x&apos; ? r : (r&amp;0x3|0x8);&#xD;    return v.toString(16);&#xD;  });&#xD;}&#xD;&#xD;return world.collabsnapUniqueId;</l></block><list></list></block></block></script></block-definition><block-definition s="collabsnap-message-key %&apos;message&apos;" type="reporter" category="variables"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>msg</l></list><l>return msg.childNodes[0].childNodes[0].childNodes[0].nodeValue</l></block><list><block var="message"/></list></block></block></script></block-definition><block-definition s="collabsnap-message-value %&apos;message&apos;" type="reporter" category="variables"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>msg</l></list><l>return msg.childNodes[0].childNodes[1].childNodes[0].nodeValue</l></block><list><block var="message"/></list></block></block></script></block-definition><block-definition s="collabsnap-make-message %&apos;key&apos; %&apos;value&apos;" type="reporter" category="variables"><header></header><code></code><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>k</l><l>v</l></list><l>var xmlDoc = document.implementation.createDocument(null, "message");&#xD;&#xD;var keyNode = xmlDoc.createElement("key");&#xD;var keyText = xmlDoc.createTextNode(k);&#xD;keyNode.appendChild(keyText);&#xD;var valNode = xmlDoc.createElement("val");&#xD;var valText = xmlDoc.createTextNode(v);&#xD;valNode.appendChild(valText);&#xD;&#xD;xmlDoc.documentElement.appendChild(keyNode);&#xD;xmlDoc.documentElement.appendChild(valNode);&#xD;&#xD;return xmlDoc;</l></block><list><block var="key"/><block var="value"/></list></block></block></script></block-definition><block-definition s="collabsnap-serialize-message %&apos;message&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>msg</l></list><l>return new XMLSerializer().serializeToString(msg);</l></block><list><block var="message"/></list></block></block></script></block-definition><block-definition s="collabsnap-filter-key-equal %&apos;key&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%txt"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>key</l></list><l>return function(xmlDoc) {&#xD;  var ele = xmlDoc.createElement("message-key");&#xD;  ele.setAttribute("key", key);;&#xD;  return ele;&#xD;}</l></block><list><block var="key"/></list></block></block></script></block-definition><block-definition s="collabsnap-add-listener %&apos;filter&apos; %&apos;handler&apos;" type="reporter" category="control"><header></header><code></code><inputs><input type="%s"></input><input type="%cmdRing"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>filter</l><l>handler</l></list><l>if(world.collabsnapListeners == undefined) {&#xD;  world.collabsnapListeners = [];&#xD;}&#xD;&#xD;var listenerId = false;&#xD;for(var idx = 0 ; idx &lt; world.collabsnapListeners.length ; idx++) {&#xD;  if(world.collabsnapListeners[idx].filter.toString() == filter.toString() &amp;&amp;&#xD;     world.collabsnapListeners[idx].callback.toString() == handler.toString()) {&#xD;    listenerId = world.collabsnapListeners[idx].listenerId;&#xD;  } &#xD;}&#xD;&#xD;if(!listenerId) {&#xD;  // Ripped from http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript &#xD;  listenerId = &apos;xxxxxxxx&apos;.replace(/[xy]/g, function(c) {&#xD;    var r = Math.random()*16|0, v = c == &apos;x&apos; ? r : (r&amp;0x3|0x8);&#xD;    return v.toString(16);&#xD;  });&#xD;  world.collabsnapListeners.push({ "filter": filter, "callback": handler, "listenerId": listenerId});&#xD;}&#xD;&#xD;return listenerId</l></block><list><block var="filter"/><block var="handler"/></list></block></block></script></block-definition><block-definition s="collabsnap-reset-listeners" type="command" category="control"><header></header><code></code><inputs></inputs><script><block s="doRun"><block s="reportJSFunction"><list></list><l>world.collabsnapListeners = [];</l></block><list></list></block></script></block-definition><block-definition s="collabsnap-remove-listener %&apos;listener-id&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>listenerId</l></list><l>if(world.collabsnapListeners != undefined) {&#xD;  for (var idx = 0 ; idx &lt; world.collabsnapListeners.length ; idx++) {&#xD;    if(world.collabsnapListeners[idx].listenerId == listenerId) {&#xD;      world.collabsnapListeners.splice(idx, 1);&#xD;      break;&#xD;    }&#xD;  }&#xD;}</l></block><list><block var="listener-id"/></list></block></script></block-definition></blocks><variables></variables></project>