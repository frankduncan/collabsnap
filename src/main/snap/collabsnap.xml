<blocks app="Snap! 4.0, http://snap.berkeley.edu" version="1"><block-definition s="collabsnap-ping-server" type="command" category="control"><header></header><code></code><inputs></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l></l></list><l>var xhr = new XMLHttpRequest();&#xD;xhr.open("GET", "/server/ping", true);&#xD;xhr.send();</l></block><list></list></block></script></block-definition><block-definition s="collabsnap-poll-server" type="command" category="control"><header></header><code></code><inputs></inputs><script><block s="doForever"><script><block s="doWait"><l>1</l></block><block s="doRun"><block s="reportJSFunction"><list><l></l></list><l>var xhr = new XMLHttpRequest();&#xD;xhr.open("GET", "/server/poll", true);&#xD;xhr.onreadystatechange = function () {&#xD;  if(xhr.readyState === XMLHttpRequest.DONE &amp;&amp; xhr.status === 200) {&#xD;    if(xhr.responseText == "true") {&#xD;      world.children.forEach(function(child) {&#xD;        if(child.addNewSprite) {&#xD;           child.addNewSprite();&#xD;        }&#xD;      });&#xD;    }     &#xD;  }&#xD;};&#xD;xhr.send();</l></block><list></list></block></script></block></script></block-definition><block-definition s="collabsnap-serialize-sprite %&apos;sprite&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%obj"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>thing</l></list><l>return new SnapSerializer().serialize(thing);</l></block><list><block var="sprite"/></list></block></block></script></block-definition><block-definition s="collabsnap-send-to-server %&apos;str&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>str</l></list><l>var xhr = new XMLHttpRequest();&#xD;xhr.open("POST", "/server/postsprite", true);&#xD;xhr.setRequestHeader("Content-length", str.length);&#xD;xhr.setRequestHeader("Connection", "close");&#xD;xhr.send(str);</l></block><list><block var="str"/></list></block></script></block-definition></blocks>